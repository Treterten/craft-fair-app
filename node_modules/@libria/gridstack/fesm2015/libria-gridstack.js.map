{"version":3,"file":"libria-gridstack.js","sources":["ng://@libria/gridstack/lib/components/gridstack-item.component.ts","ng://@libria/gridstack/lib/services/gridstack.service.ts","ng://@libria/gridstack/lib/components/gridstack.component.ts","ng://@libria/gridstack/lib/gridstack.module.ts"],"sourcesContent":["import {\r\n    AfterViewInit,\r\n    Component,\r\n    ElementRef,\r\n    Input,\r\n    Renderer2,\r\n    ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { GridItem } from './models/grid-item';\r\n\r\ndeclare var _: any;\r\nlet _sequence = 0;\r\n\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'div[lb-gridstack-item]',\r\n    templateUrl: './gridstack-item.component.html',\r\n    styleUrls: ['./gridstack-item.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class GridstackItemComponent implements AfterViewInit, GridItem {\r\n    @Input() public x: number | string;\r\n    @Input() public y: number | string;\r\n    @Input() public width: number | string;\r\n    @Input() public height: number | string;\r\n    @Input() public id: string;\r\n    @Input('max-width') public maxWidth: number | string;\r\n    @Input('max-height') public maxHeight: number | string;\r\n    @Input('min-width') public minWidth: number | string;\r\n    @Input('min-height') public minHeight: number | string;\r\n    @Input('no-resize') public noResize: boolean | string;\r\n    @Input('no-move') public noMove: boolean | string;\r\n    @Input('auto-position') public autoPosition: boolean | string;\r\n    @Input() public locked: boolean | string;\r\n    public generatedId: string = (_sequence++).toString();\r\n\r\n    constructor(public elem: ElementRef,\r\n                private _renderer: Renderer2\r\n    ) { }\r\n\r\n    public ngAfterViewInit() {\r\n        this._renderer.addClass(this.elem.nativeElement, 'grid-stack-item');\r\n        this._setAttributeIfNotUndefined('data-gs-x', this.x);\r\n        this._setAttributeIfNotUndefined('data-gs-y', this.y);\r\n        this._setAttributeIfNotUndefined('data-gs-width', this.width);\r\n        this._setAttributeIfNotUndefined('data-gs-height', this.height);\r\n        this._setAttributeIfNotUndefined('data-gs-id', this.id);\r\n        this._setAttributeIfNotUndefined('data-gs-max-width', this.maxWidth);\r\n        this._setAttributeIfNotUndefined('data-gs-max-height', this.maxHeight);\r\n        this._setAttributeIfNotUndefined('data-gs-min-width', this.minWidth);\r\n        this._setAttributeIfNotUndefined('data-gs-min-height', this.minHeight);\r\n\r\n        this._setAttributeIfTrue('data-gs-no-resize', this.noResize);\r\n        this._setAttributeIfTrue('data-gs-no-move', this.noMove);\r\n        this._setAttributeIfTrue('data-gs-auto-position', this.autoPosition);\r\n        this._setAttributeIfTrue('data-gs-locked', this.locked);\r\n    }\r\n\r\n    private _setAttributeIfNotUndefined(attrName: string, val: number | string): void {\r\n        if (!_.isNull(val) && !_.isUndefined(val)) {\r\n            this._renderer.setAttribute(this.elem.nativeElement, attrName, val.toString());\r\n        }\r\n    }\r\n\r\n    private _setAttributeIfTrue(attrName: string, val: boolean | string): void {\r\n        if (val === true || val === 'true') {\r\n            this._renderer.setAttribute(this.elem.nativeElement, attrName, 'true');\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Grid } from '../components/models/grid';\r\nimport { GridItem } from '../components/models/grid-item';\r\n\r\n@Injectable()\r\nexport class GridstackService {\r\n    private _gridItems: {\r\n        gridId: string;\r\n        item: GridItem;\r\n    }[] = [];\r\n\r\n    private _grids: Grid[] = [];\r\n\r\n    constructor() { }\r\n\r\n    public addGrid(grid: Grid) {\r\n        this._grids.push(grid);\r\n    }\r\n\r\n    public removeGrid(grid: Grid) {\r\n        this._grids.splice(this._grids.findIndex(g => g.generatedId == grid.generatedId), 1);\r\n        this._gridItems = this._gridItems.filter(gi => gi.gridId != grid.generatedId);\r\n    }\r\n\r\n    public attachGridItem(gridId: string, gridItemId: string) {\r\n        this._gridItems.find(gi => gi.item.generatedId == gridItemId).gridId = gridId;\r\n    }\r\n\r\n    public detachGridItemIfExists(gridItemId: string) {\r\n        const gridItem = this._gridItems.find(gi => gi.item.generatedId == gridItemId);\r\n\r\n        if (!!gridItem) {\r\n            gridItem.gridId = null;\r\n        }\r\n    }\r\n\r\n    public getGridItems(gridId: string) {\r\n        return this._gridItems.filter(gi => gi.gridId == gridId).map(g => g.item);\r\n    }\r\n\r\n    public getOrphanGridItems() {\r\n        return this._gridItems.filter(gi => gi.gridId == null).map(g => g.item);\r\n    }\r\n\r\n    public addOrphanGridItem(gridItem: GridItem) {\r\n        this._gridItems.push({\r\n            gridId: null,\r\n            item: gridItem\r\n        });\r\n    }\r\n\r\n    public removeGridItem(gridItemId: string) {\r\n        this._gridItems.splice(this._gridItems.findIndex(gi => gi.item.generatedId == gridItemId), 1);\r\n    }\r\n}\r\n","import { GridstackOptions } from './models/gridstack-options';\r\nimport {\r\n    AfterViewInit,\r\n    Component,\r\n    ContentChildren,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    NgZone,\r\n    Output,\r\n    QueryList,\r\n    Renderer2,\r\n    ViewEncapsulation,\r\n    OnInit,\r\n    OnDestroy,\r\n    OnChanges,\r\n    SimpleChanges,\r\n} from '@angular/core';\r\n\r\ndeclare var _: any;\r\nlet _sequence = 0;\r\n\r\nimport { GridstackItemComponent } from './gridstack-item.component';\r\nimport { Item } from './models/item';\r\nimport { GridstackService } from '../services/gridstack.service';\r\nimport { Grid } from './models/grid';\r\nimport { GridItem } from './models/grid-item';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'div[lb-gridstack]',\r\n    templateUrl: './gridstack.component.html',\r\n    styleUrls: ['./gridstack.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class GridstackComponent implements OnInit, OnDestroy, AfterViewInit, OnChanges, Grid {\r\n    @ContentChildren(GridstackItemComponent) public gridstackItems: QueryList<GridstackItemComponent>;\r\n    @Input() public options: GridstackOptions;\r\n    @Input() public animate: boolean | string;\r\n    @Input() public width: number | string;\r\n    @Input() public height: number | string;\r\n\r\n    @Output() public change = new EventEmitter<Item[]>();\r\n    @Output() public added = new EventEmitter<Item[]>();\r\n    @Output() public removed = new EventEmitter<Item[]>();\r\n    @Output() public dragstart = new EventEmitter();\r\n    @Output() public dragstop = new EventEmitter();\r\n    @Output() public resizestart = new EventEmitter();\r\n    @Output() public gsresizestop = new EventEmitter();\r\n\r\n    public generatedId = (_sequence++).toString();\r\n\r\n    private _gridstack: any;\r\n\r\n    private _ngUnsubscribe = new Subject();\r\n\r\n    constructor(private _zone: NgZone,\r\n                private _el: ElementRef,\r\n                private _renderer: Renderer2,\r\n                private _gridstackService: GridstackService) { }\r\n\r\n    public ngOnInit(): void {\r\n        if (this.options && this.options.acceptWidgets != null) {\r\n            console.error('acceptWidgets option not supported yet!');\r\n        }\r\n\r\n        this._zone.runOutsideAngular(() => {\r\n            this._renderer.addClass(this._el.nativeElement, 'grid-stack');\r\n\r\n            if (this._isValueTrue(this.animate)) {\r\n                this._renderer.setAttribute(this._el.nativeElement, 'data-gs-animate', 'true');\r\n            }\r\n\r\n            this._setAttributeIfNotUndefined('data-gs-width', this.width);\r\n            this._setAttributeIfNotUndefined('data-gs-height', this.height);\r\n\r\n            const width = this.width || (this.options || {}).width;\r\n\r\n            if (!_.isNull(width) && !_.isUndefined(width)) {\r\n                this._renderer.addClass(this._el.nativeElement, `grid-stack-${width}`);\r\n            }\r\n\r\n            const el = ($(this._el.nativeElement) as any).gridstack(this.options);\r\n            $(el).data('generated-id', this.generatedId);\r\n            this._gridstack = $(el).data('gridstack');\r\n\r\n            this._gridstackService.addGrid(this);\r\n\r\n            // Hook events\r\n            $(this._el.nativeElement).on('added', (evt: any, items: Item[]) => {\r\n                const itemsOfCurrentGrid = this._gridstackService.getGridItems(this.generatedId);\r\n                const existingItemIds: string[] = (this._gridstack as any).grid.nodes.map(i => $(i.el)\r\n                    .attr('class')\r\n                    .split(/\\s+/)\r\n                    .find(s => s.startsWith('lb-generated-id-'))\r\n                    .replace('lb-generated-id-', ''));\r\n\r\n                const itemsToAdd = existingItemIds.filter(i => !itemsOfCurrentGrid.some(ei => ei.generatedId === i));\r\n                itemsToAdd.forEach(i => this._gridstackService.attachGridItem(this.generatedId, i));\r\n\r\n                this.added.emit(items);\r\n            });\r\n\r\n            $(this._el.nativeElement).on('change', (evt: any, items: Item[]) => {\r\n                this.change.emit(items);\r\n            });\r\n\r\n            $(this._el.nativeElement).on('dragstart', (evt: any, ui: any) => {\r\n              this.dragstart.emit(evt);\r\n            });\r\n\r\n            $(this._el.nativeElement).on('dragstop', (evt: any, ui: any) => {\r\n              this.dragstop.emit(evt);\r\n            });\r\n\r\n            $(this._el.nativeElement).on('resizestart', (evt: any, ui: any) => {\r\n              this.resizestart.emit(evt);\r\n            });\r\n\r\n            $(this._el.nativeElement).on('gsresizestop', (evt: any, ui: any) => {\r\n              this.gsresizestop.emit(evt);\r\n            });\r\n\r\n            $(this._el.nativeElement).on('removed', (evt: any, items: Item[]) => {\r\n                const itemsOfCurrentGrid = this._gridstackService.getGridItems(this.generatedId);\r\n                const existingItemIds: string[] = (this._gridstack as any).grid.nodes.map(i => $(i.el)\r\n                    .attr('class')\r\n                    .split(/\\s+/)\r\n                    .find(s => s.startsWith('lb-generated-id-'))\r\n                    .replace('lb-generated-id-', ''));\r\n\r\n                const itemsToDelete = itemsOfCurrentGrid.filter(i => !existingItemIds.some(ei => ei === i.generatedId));\r\n                itemsToDelete.forEach(i => this._gridstackService.detachGridItemIfExists(i.generatedId));\r\n                this.removed.emit(items);\r\n            });\r\n        });\r\n    }\r\n\r\n    public ngOnChanges(changes: SimpleChanges): void {\r\n        const heightChanges = changes.height;\r\n        const optionsChanges = changes.options;\r\n\r\n        if (heightChanges && !heightChanges.isFirstChange() && heightChanges.currentValue !== heightChanges.previousValue) {\r\n            this._updateGridstackHeight(+heightChanges.currentValue);\r\n        }\r\n\r\n        if (optionsChanges && !optionsChanges.isFirstChange()) {\r\n            const prev: GridstackOptions = optionsChanges.previousValue;\r\n            const curr: GridstackOptions = optionsChanges.currentValue;\r\n\r\n            if (curr.cellHeight !== prev.cellHeight) {\r\n                this._updateGridstackHeight(curr.cellHeight);\r\n            }\r\n        }\r\n    }\r\n\r\n    public ngAfterViewInit(): void {\r\n        this.gridstackItems.changes\r\n            .pipe(takeUntil(this._ngUnsubscribe))\r\n            .subscribe(changes => {\r\n                this._handleItemChanges(this.gridstackItems.toArray());\r\n            });\r\n\r\n        this._handleItemChanges(this.gridstackItems.toArray());\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this._ngUnsubscribe.next();\r\n        this._gridstack.destroy();\r\n        this._gridstackService.removeGrid(this);\r\n    }\r\n\r\n    private _updateGridstackHeight(height: number | string) {\r\n        this._zone.runOutsideAngular(() => {\r\n            this._gridstack.cellHeight(height as any);\r\n        });\r\n    }\r\n\r\n    private _handleItemChanges(items: GridstackItemComponent[]): void {\r\n        const itemsOfCurrentGrid = this._gridstackService.getGridItems(this.generatedId);\r\n        const itemsToAdd = items.filter(i => !itemsOfCurrentGrid.some(w => w.generatedId === i.generatedId));\r\n        const itemsToRemove = itemsOfCurrentGrid.filter(w => !items.some(i => i.generatedId === w.generatedId));\r\n\r\n        this._gridstack.batchUpdate();\r\n        itemsToAdd.forEach(i => this._addItem(i));\r\n        itemsToRemove.forEach(i => this._removeItem(i));\r\n        this._gridstack.commit();\r\n    }\r\n\r\n    private _addItem(item: GridstackItemComponent): void {\r\n        this._zone.runOutsideAngular(() => {\r\n            if (this._gridstack.willItFit(+item.x, +item.y, +item.width, +item.height, this._isValueTrue(item.autoPosition))) {\r\n                this._gridstackService.addOrphanGridItem(item);\r\n                $(item.elem.nativeElement).addClass('lb-generated-id-' + item.generatedId);\r\n                this._gridstack.makeWidget(item.elem.nativeElement);\r\n            } else {\r\n                console.error('Not enough free space to place the widget');\r\n            }\r\n        });\r\n    }\r\n\r\n    private _removeItem(item: GridItem): void {\r\n        this._gridstackService.removeGridItem(item.generatedId);\r\n\r\n        this._zone.runOutsideAngular(() => {\r\n            this._gridstack.removeWidget(item.elem.nativeElement);\r\n        });\r\n    }\r\n\r\n    private _setAttributeIfNotUndefined(attrName: string, val: number | string): void {\r\n        if (!_.isNull(val) && !_.isUndefined(val)) {\r\n            this._renderer.setAttribute(this._el.nativeElement, attrName, val.toString());\r\n        }\r\n    }\r\n\r\n    private _isValueTrue(val: boolean | string) {\r\n        return (val === true || val === 'true');\r\n    }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { GridstackComponent } from './components/gridstack.component';\r\nimport { GridstackItemComponent } from './components/gridstack-item.component';\r\nimport { GridstackService } from './services/gridstack.service';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    declarations: [\r\n        GridstackComponent,\r\n        GridstackItemComponent],\r\n    exports: [\r\n        GridstackComponent,\r\n        GridstackItemComponent]\r\n})\r\nexport class GridstackModule {\r\n    public static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: GridstackModule,\r\n            providers: [\r\n                GridstackService\r\n            ]\r\n        };\r\n    }\r\n}\r\n"],"names":["_sequence"],"mappings":"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"}